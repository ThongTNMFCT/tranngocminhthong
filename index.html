<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Terminal - Trần Ngọc Minh Thông</title>
    <link rel="icon" href="https://i.ibb.co/cS61WGmW/I-m-Thong-Tran-1.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        /* --- Root Variables for Retro Terminal Theme --- */
        :root {
            --dark-navy: #0a192f;
            --navy: #112240;
            --light-navy: #233554;
            --slate: #8892b0;
            --light-slate: #a8b2d1;
            --lightest-slate: #ccd6f6;
            --white: #e6f1ff;
            --accent: #64ffda;
            --font-mono: 'Fira Code', monospace;
            --transition: all 0.25s cubic-bezier(0.645, 0.045, 0.355, 1);
        }

        /* --- Global Styles --- */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-mono);
            background-color: var(--dark-navy);
            color: var(--slate);
            line-height: 1.6;
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
        }
        body::after {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(0deg, rgba(0,0,0,0.15), rgba(0,0,0,0.15) 1px, transparent 1px, transparent 2px);
            pointer-events: none;
            z-index: 9999;
            opacity: 0.5;
        }

        /* --- Layout & Reusable Classes --- */
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        .section {
            padding: 100px 0;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }
        .section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        .section-title {
            display: flex;
            align-items: center;
            font-size: 1.8rem;
            color: var(--lightest-slate);
            margin-bottom: 2rem;
            white-space: nowrap;
        }
        .section-title::before {
            content: '>';
            margin-right: 0.5rem;
            color: var(--accent);
            font-family: var(--font-mono);
        }
        .section-title::after {
            content: '';
            display: block;
            width: 100%;
            height: 1px;
            background-color: var(--light-navy);
            margin-left: 1.5rem;
        }
        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            border: 1px solid var(--accent);
            color: var(--accent);
            background-color: transparent;
            text-decoration: none;
            border-radius: 4px;
            font-family: var(--font-mono);
            transition: var(--transition);
        }
        .btn:hover {
            background-color: rgba(100, 255, 218, 0.1);
        }

        /* --- Header --- */
        .main-header {
            position: sticky;
            top: 0;
            z-index: 10;
            background-color: rgba(10, 25, 47, 0.85);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            border-bottom: 1px solid var(--light-navy);
        }
        .main-header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo a {
            color: var(--accent);
            font-weight: bold;
            text-decoration: none;
            font-size: 1.5rem;
        }
        .main-nav ol {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }
        .main-nav a {
            color: var(--lightest-slate);
            text-decoration: none;
            transition: var(--transition);
        }
        .main-nav a:hover { color: var(--accent); }
        .main-nav a::before {
            content: '[' counter(nav-item) '] ';
            counter-increment: nav-item;
            color: var(--accent);
        }
        .mobile-menu-btn { display: none; }

        /* --- Hero Section --- */
        #hero {
            min-height: 85vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        #hero .intro {
            color: var(--accent);
            font-size: 1rem;
            margin-bottom: 1.5rem;
        }
        #hero h1 {
            font-size: clamp(40px, 8vw, 80px);
            color: var(--lightest-slate);
            font-weight: 600;
        }
        #hero h2 {
            font-size: clamp(30px, 6vw, 60px);
            color: var(--slate);
            font-weight: 600;
            margin-bottom: 1rem;
        }
        #hero p {
            max-width: 540px;
            margin-bottom: 2rem;
            color: var(--light-slate);
        }
        /* Typing effect */
        .typed-cursor {
            opacity: 1;
            animation: blink 0.7s infinite;
            color: var(--accent);
        }
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0; }
            100% { opacity: 1; }
        }

        /* --- About Section --- */
        #about p {
            margin-bottom: 1rem;
            max-width: 600px;
        }
        #about ul {
            list-style: none;
        }
        #about ul li::before {
            content: '»';
            color: var(--accent);
            margin-right: 0.75rem;
        }

        /* --- Card Styles (Projects, Posts, Achievements) --- */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        .card {
            background-color: var(--light-navy);
            padding: 1.5rem;
            border-radius: 4px;
            transition: var(--transition);
            box-shadow: 0 10px 30px -15px rgba(2,12,27,0.7);
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 30px -15px rgba(2,12,27,0.7);
        }
        .card a { text-decoration: none; }
        .card-title {
            color: var(--lightest-slate);
            font-size: 1.25rem;
            margin-bottom: 1rem;
            transition: var(--transition);
        }
        .card:hover .card-title { color: var(--accent); }
        .card-content {
            color: var(--light-slate);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        .card-footer span {
            color: var(--accent);
            font-size: 0.8rem;
        }
        .view-all-link {
            display: block;
            text-align: center;
            margin-top: 3rem;
        }

        /* --- Contact Section --- */
        #contact { text-align: center; }
        #contact h2 { font-size: 2.5rem; color: var(--lightest-slate); margin-bottom: 1rem; }
        #contact p { max-width: 600px; margin: 0 auto 2rem; }

        /* --- Footer --- */
        .main-footer {
            text-align: center;
            padding: 1.5rem;
            font-size: 0.8rem;
            color: var(--slate);
            border-top: 1px solid var(--light-navy);
        }

        /* --- Mobile Styles --- */
        @media (max-width: 768px) {
            .container { padding: 0 1rem; }
            .section { padding: 80px 0; }
            .main-nav { display: none; } /* Hide for simplicity, can be replaced with mobile menu JS */
            .mobile-menu-btn {
                display: block;
                background: none;
                border: none;
                color: var(--accent);
                font-size: 2rem;
                cursor: pointer;
            }
        }
    </style>
</head>
<body>

    <header class="main-header">
        <div class="container">
            <div class="logo">
                <a href="index.html">./ThongTNM</a>
            </div>
            <nav class="main-nav">
                <ol>
                    <li><a href="#about">Giới thiệu</a></li>
                    <li><a href="#projects">Dự án</a></li>
                    <li><a href="bai-viet.html">Bài viết</a></li>
                    <li><a href="thanh-tich.html">Thành tích</a></li>
                    <li><a href="#contact">Liên hệ</a></li>
                </ol>
            </nav>
            <button class="mobile-menu-btn" aria-label="Menu">&#9776;</button>
        </div>
    </header>

    <main class="container">
        <section id="hero">
            <p class="intro">user@thong-portfolio:~$</p>
            <h1><span id="typing-effect"></span></h1>
            <h2 class="subtitle">Học sinh đam mê lập trình & sáng tạo.</h2>
            <p>
                Là một học sinh tại FPT School Cần Thơ, mình đang trên hành trình khám phá thế giới công nghệ và biến những ý tưởng sáng tạo thành các sản phẩm kỹ thuật số thú vị và hữu ích.
            </p>
            <div>
                <a href="#projects" class="btn">ls -a ./dự-án</a>
            </div>
        </section>

        <section id="about" class="section">
            <h2 class="section-title">Giới thiệu</h2>
            <p>
                Mình là một FSchooler tại FPT School Cần Thơ với niềm yêu thích đặc biệt trong việc thiết kế và xây dựng các trang web. Mục tiêu của mình là tạo ra những trải nghiệm số không chỉ đẹp về mặt thẩm mỹ mà còn dễ dàng sử dụng và mang lại giá trị thực tế cho mọi người.
            </p>
            <ul>
                <li>MSHS: FCT31178</li>
                <li>Email: ThongTNMFCT31178@gmail.com</li>
                <li>Quê quán: Long Xuyên, An Giang</li>
            </ul>
        </section>

        <section id="projects" class="section">
            <h2 class="section-title">Dự án nổi bật</h2>
            <div id="projects-list" class="card-grid">
                <p>Đang tải dự án...</p>
            </div>
            <a href="du-an.html" class="btn view-all-link">Xem tất cả dự án</a>
        </section>

        <section id="latest-posts" class="section">
            <h2 class="section-title">Bài viết gần đây</h2>
            <div id="posts-list" class="card-grid">
                 <p>Đang tải bài viết...</p>
            </div>
            <a href="bai-viet.html" class="btn view-all-link">Xem tất cả bài viết</a>
        </section>

        <section id="latest-achievements" class="section">
            <h2 class="section-title">Thành tích nổi bật</h2>
            <div id="achievements-list" class="card-grid">
                <p>Đang tải thành tích...</p>
            </div>
            <a href="thanh-tich.html" class="btn view-all-link">Xem tất cả thành tích</a>
        </section>

        <section id="contact" class="section">
            <h2>Get In Touch()</h2>
            <p>
                Mình luôn mong muốn được kết nối, học hỏi từ mọi người và trao đổi về những ý tưởng công nghệ. Nếu bạn có câu hỏi hoặc muốn hợp tác, đừng ngần ngại liên hệ với mình nhé!
            </p>
            <a href="mailto:ThongTNMFCT31178@gmail.com" class="btn">./send-email.sh</a>
        </section>
    </main>

    <footer class="main-footer">
        <p>Thiết kế & Xây dựng bởi Trần Ngọc Minh Thông &copy; 2024</p>
    </footer>

    <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>
    <script type="module">
        import { firebaseConfig } from './firebase-key.js';
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, getDocs, query, orderBy, limit } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // --- Firebase Init ---
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- Typing Effect ---
        new Typed('#typing-effect', {
            strings: ['Trần Ngọc Minh Thông', 'A Web Developer', 'A Creator'],
            typeSpeed: 50,
            backSpeed: 30,
            loop: true,
            cursorChar: '_',
        });

        // --- Scroll Animation Logic ---
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                }
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('.section').forEach(el => observer.observe(el));

        // --- Utility to strip HTML for snippets ---
        function stripHtml(html){
           let doc = new DOMParser().parseFromString(html, 'text/html');
           return doc.body.textContent || "";
        }

        // --- Generic Fetch Function ---
        async function fetchLatestItems(collectionName, container, limitCount) {
            try {
                const q = query(collection(db, collectionName), orderBy("timestamp", "desc"), limit(limitCount));
                const querySnapshot = await getDocs(q);

                if (querySnapshot.empty) {
                    container.innerHTML = `<p>Chưa có nội dung nào.</p>`;
                    return;
                }

                container.innerHTML = '';
                querySnapshot.forEach((doc) => {
                    const item = doc.data();
                    const snippet = stripHtml(item.content || '').substring(0, 100) + '...';

                    const itemElement = `
                        <div class="card">
                            <a href="view.html?type=${collectionName}&id=${doc.id}">
                                <h3 class="card-title">${item.title}</h3>
                                ${collectionName !== 'achievements' ? `<div class="card-content"><p>${snippet}</p></div>` : ''}
                                <div class="card-footer">
                                    <span>Xem chi tiết &rarr;</span>
                                </div>
                            </a>
                        </div>
                    `;
                    container.innerHTML += itemElement;
                });
            } catch (error) {
                console.error(`Error fetching ${collectionName}: `, error);
                container.innerHTML = `<p style="color:red;">Lỗi khi tải dữ liệu.</p>`;
            }
        }

        // --- Fetch all latest content ---
        fetchLatestItems("projects", document.getElementById('projects-list'), 3);
        fetchLatestItems("posts", document.getElementById('posts-list'), 3);
        fetchLatestItems("achievements", document.getElementById('achievements-list'), 3);
    </script>
</body>
</html>
